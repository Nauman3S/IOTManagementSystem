{"version":3,"sources":["Axios/apiFunctions.js","../node_modules/@ant-design/icons-svg/es/asn/CheckOutlined.js","../node_modules/@ant-design/icons/es/icons/CheckOutlined.js","pages/SignIn.js"],"names":["updateUser","values","server","patch","headers","Authorization","getToken","getCounts","get","getAllUsers","deleteUser","id","addMacAddress","macAddress","getAllMacAddress","removeMacAddress","userId","clientDashboardCount","forgotPassword","email","post","verifyOTP","code","resetPassword","password","getAdminUserAllMacAddress","getDataByMacAddress","query","uploadFile","file","getAllFiles","deleteFile","Key","delete","publishToMqtt","allPrograms","addProgram","deleteProgram","editProgram","data","programName","command","allUrls","addUrl","deleteUrl","editUrl","url","CheckOutlined","props","ref","React","AntdIcon","_objectSpread","icon","CheckOutlinedSvg","displayName","Title","Typography","Header","Layout","Footer","Content","SignIn","dispatch","useDispatch","navigate","useNavigate","btnRef","useRef","useState","loading","setLoading","confirmLoading","setConfirmLoading","emailModalVisible","setEmailModalVisible","otpModalVisible","setOtpModalVisible","passwordModalVisible","setPasswordModalVisible","setEmail","didMount","setDidMount","onFinish","current","blur","signIn","res","useEffect","handleForgotPassword","status","notification","success","message","description","error","response","handleEmailModal","handleOTP","otp","className","gutter","justify","xs","span","offset","lg","md","level","onFinishFailed","errorInfo","console","log","layout","Item","label","name","rules","required","placeholder","Password","type","htmlType","style","width","onClick","textDecoration","cursor","padding","src","signinbg","alt","title","destroyOnClose","visible","footer","onCancel","alignItems","labelCol","open","hasFeedback","dependencies","getFieldValue","validator","_","value","Promise","reject","Error","resolve"],"mappings":"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","file":"static/js/18.88950dca.chunk.js","sourcesContent":["import server from \"./index\";\n\nimport { getToken } from \"../Redux/localStorage\";\n\nexport const updateUser = (values) =>\n  server.patch(\"/auth/update-user\", values, {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const getCounts = () =>\n  server.get(\"/admin/count\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const getAllUsers = () =>\n  server.get(\"/admin/all-users\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const deleteUser = (id) =>\n  server.patch(\n    \"/admin/delete-user\",\n    { id: id },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const addMacAddress = (macAddress) =>\n  server.patch(\n    \"/macAddress/add\",\n    { macAddress },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const getAllMacAddress = () =>\n  server.get(\"/macAddress/all\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const removeMacAddress = (macAddress, userId) =>\n  server.patch(\n    \"/macAddress/remove\",\n    { macAddress, userId },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const clientDashboardCount = () =>\n  server.get(\"/count/\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const forgotPassword = (email) => server.post(\"/auth/forgot\", { email });\n\nexport const verifyOTP = (email, code) =>\n  server.post(\"/auth/verify\", { email, code });\n\nexport const resetPassword = (email, password) =>\n  server.post(\"/auth/reset\", { email, password });\n\nexport const getAdminUserAllMacAddress = () =>\n  server.get(\"/admin/all-macAddress\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const getDataByMacAddress = (query) => server.post(\"/mqtt/data\", query);\n\nexport const getEnerygyCost = () =>\n  server.get(\"/energy\", {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const addEnergyCost = (energyCost) =>\n  server.patch(\"/energy\", energyCost, {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const uploadFile = (file) =>\n  server.post(\"/mqtt/file/upload\", file, {\n    headers: {\n      \"x-access-token\": getToken(),\n    },\n  });\n\nexport const getAllFiles = (query) =>\n  server.post(\"/mqtt/files\", query, {\n    headers: {\n      \"x-access-token\": getToken(),\n    },\n  });\n\nexport const deleteFile = async (Key) => {\n  return await server.delete(`/mqtt/file/delete/${Key}`, {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n};\n\nexport const publishToMqtt = (file) =>\n  server.post(`/mqtt/publish`, file, {\n    headers: {\n      \"x-access-token\": getToken(),\n    },\n  });\n\nexport const allPrograms = (macAddress) =>\n  server.post(\n    \"/program/all\",\n    { macAddress },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const addProgram = (values) =>\n  server.post(\"/program/post\", values, {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const deleteProgram = (id) =>\n  server.patch(\n    `/program/delete`,\n    { id },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const editProgram = (data, id) =>\n  server.patch(\n    `/program/edit`,\n    { id: id, programName: data.programName, command: data.command },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const allUrls = (macAddress) =>\n  server.post(\n    \"/url/all\",\n    { macAddress },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const addUrl = (values) =>\n  server.post(\"/url/post\", values, {\n    headers: {\n      Authorization: `Bearer ${getToken()}`,\n    },\n  });\n\nexport const deleteUrl = (id) =>\n  server.patch(\n    `/url/delete`,\n    { id },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n\nexport const editUrl = (data, id) =>\n  server.patch(\n    `/url/edit`,\n    { id: id, url: data.url },\n    {\n      headers: {\n        Authorization: `Bearer ${getToken()}`,\n      },\n    }\n  );\n","// This icon file is generated automatically.\nvar CheckOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z\" } }] }, \"name\": \"check\", \"theme\": \"outlined\" };\nexport default CheckOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckOutlinedSvg from \"@ant-design/icons-svg/es/asn/CheckOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CheckOutlined = function CheckOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: CheckOutlinedSvg\n  }));\n};\n\nCheckOutlined.displayName = 'CheckOutlined';\nexport default /*#__PURE__*/React.forwardRef(CheckOutlined);","import React, { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Layout,\n  Button,\n  Row,\n  Col,\n  Typography,\n  Form,\n  Input,\n  Modal,\n  notification,\n} from \"antd\";\nimport signinbg from \"../assets/images/smartoee.png\";\nimport { useDispatch } from \"react-redux\";\nimport { signIn } from \"../Redux/actions/auth.actions\";\nimport {\n  forgotPassword,\n  verifyOTP,\n  resetPassword,\n} from \"../Axios/apiFunctions\";\n\nconst { Title } = Typography;\nconst { Header, Footer, Content } = Layout;\n\nconst SignIn = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const btnRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n  const [emailModalVisible, setEmailModalVisible] = useState(false);\n  const [otpModalVisible, setOtpModalVisible] = useState(false);\n  const [passwordModalVisible, setPasswordModalVisible] = useState(false);\n  const [email, setEmail] = useState(false);\n  const [didMount, setDidMount] = useState(false);\n\n  const onFinish = async (values) => {\n    setLoading(true);\n    btnRef.current.blur();\n    const res = await dispatch(signIn(values));\n    setLoading(false);\n\n    if (!res) {\n      navigate(\"/\");\n    }\n  };\n  useEffect(() => {\n    setDidMount(true);\n    return () => setDidMount(false);\n  }, []);\n\n  if (!didMount) {\n    return null;\n  }\n\n  const onFinishFailed = (errorInfo) => {\n    console.log(\"Failed:\", errorInfo);\n  };\n  const handleForgotPassword = async ({ password }) => {\n    setConfirmLoading(true);\n\n    try {\n      const res = await resetPassword(email, password);\n      if (res.status === 200) {\n        notification.success({\n          message: \"Success\",\n          description: res.data.message,\n        });\n        setPasswordModalVisible(false);\n\n        setConfirmLoading(false);\n      }\n    } catch (error) {\n      setConfirmLoading(false);\n\n      notification.error({\n        message: \"Error\",\n        description: error.response.data.message,\n      });\n    }\n  };\n  const handleEmailModal = async ({ email }) => {\n    setEmail(email);\n    setConfirmLoading(true);\n\n    try {\n      const res = await forgotPassword(email);\n      if (res.status === 200) {\n        notification.success({\n          message: \"OTP Sent\",\n          description: res.data.message,\n        });\n        setEmailModalVisible(false);\n\n        setOtpModalVisible(true);\n        setConfirmLoading(false);\n      }\n    } catch (error) {\n      setEmailModalVisible(false);\n      setConfirmLoading(false);\n\n      notification.error({\n        message: \"Error\",\n        description: error.response.data.message,\n      });\n    }\n  };\n  const handleOTP = async ({ otp }) => {\n    setConfirmLoading(true);\n\n    try {\n      const res = await verifyOTP(email, otp);\n      if (res.status === 200) {\n        notification.success({\n          message: \"OTP Status\",\n          description: res.data.message,\n        });\n        setOtpModalVisible(false);\n\n        setPasswordModalVisible(true);\n        setConfirmLoading(false);\n      }\n    } catch (error) {\n      setConfirmLoading(false);\n\n      notification.error({\n        message: \"Error\",\n        description: error.response.data.message,\n      });\n    }\n  };\n\n  return (\n    <>\n      <Layout className='layout-default layout-signin'>\n        <Header>\n          <div className='header-col header-brand'>\n            <h5> Smart IoT Management System</h5>\n          </div>\n        </Header>\n        <Content className='signin'>\n          <Row gutter={[24, 0]} justify='space-around'>\n            <Col\n              xs={{ span: 24, offset: 0 }}\n              lg={{ span: 6, offset: 2 }}\n              md={{ span: 12 }}>\n              <Title className='mb-15'>Sign In</Title>\n              <Title className='font-regular text-muted' level={5}>\n                Enter your email and password to sign in\n              </Title>\n              <Form\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n                layout='vertical'\n                className='row-col'>\n                <Form.Item\n                  className='username'\n                  label='Email'\n                  name='email'\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Please input your email!\",\n                    },\n                  ]}>\n                  <Input placeholder='Email' />\n                </Form.Item>\n\n                <Form.Item\n                  className='username'\n                  label='Password'\n                  name='password'\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Please input your password!\",\n                    },\n                  ]}>\n                  <Input.Password placeholder='Password' />\n                </Form.Item>\n\n                <Form.Item>\n                  <Button\n                    type='primary'\n                    htmlType='submit'\n                    loading={loading}\n                    ref={btnRef}\n                    style={{ width: \"100%\" }}>\n                    SIGN IN\n                  </Button>\n                </Form.Item>\n                <p className='font-semibold text-muted'>\n                  <br />\n                  <div\n                    onClick={() => setEmailModalVisible(true)}\n                    className='text-dark font-bold'\n                    style={{ textDecoration: \"underline\", cursor: \"pointer\" }}>\n                    Forgot Password?\n                  </div>\n                </p>\n              </Form>\n            </Col>\n            <Col\n              className='sign-img'\n              style={{ padding: 12 }}\n              xs={{ span: 24 }}\n              lg={{ span: 12 }}\n              md={{ span: 12 }}>\n              <img src={signinbg} alt='' />\n            </Col>\n          </Row>\n        </Content>\n        <Footer>\n          <p className='copyright'>\n            Copyright Â© 2022 Smart IoT Management System\n          </p>\n        </Footer>\n      </Layout>\n      <Modal\n        title='Enter Email'\n        destroyOnClose={true}\n        visible={emailModalVisible}\n        footer={null}\n        onCancel={() => setEmailModalVisible(false)}\n        confirmLoading={confirmLoading}>\n        <Form\n          name='control-ref'\n          onFinish={handleEmailModal}\n          style={{ alignItems: \"center\" }}\n          labelCol={{\n            span: 4,\n          }}>\n          <Form.Item\n            name='email'\n            label='Email'\n            rules={[\n              {\n                required: true,\n                message:\n                  \"Please enter your email address associated with your account!\",\n              },\n              {\n                type: \"email\",\n                message: \"Please enter a valid email address\",\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n\n          <br />\n          <Form.Item>\n            <Button type='primary' htmlType='submit' loading={confirmLoading}>\n              Next\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <Modal\n        title='Enter OTP'\n        destroyOnClose={true}\n        open={otpModalVisible}\n        footer={null}\n        onCancel={() => setOtpModalVisible(false)}\n        confirmLoading={confirmLoading}>\n        <Form\n          name='control-ref'\n          onFinish={handleOTP}\n          labelCol={{\n            span: 4,\n          }}>\n          <Form.Item\n            name='otp'\n            label='OTP'\n            rules={[\n              {\n                required: true,\n                message: \"Please enter OTP you  received!\",\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n\n          <br />\n          <Form.Item>\n            <Button type='primary' htmlType='submit' loading={confirmLoading}>\n              Next\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <Modal\n        title='Enter New Password'\n        destroyOnClose={true}\n        open={passwordModalVisible}\n        footer={null}\n        onCancel={() => setPasswordModalVisible(false)}\n        confirmLoading={confirmLoading}>\n        <Form\n          name='control-ref'\n          onFinish={handleForgotPassword}\n          labelCol={{\n            span: 8,\n          }}>\n          <Form.Item\n            name='password'\n            label='Password'\n            rules={[\n              {\n                required: true,\n                message: \"Please input your password!\",\n              },\n            ]}\n            hasFeedback>\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item\n            name='confirm'\n            label='Confirm Password'\n            dependencies={[\"password\"]}\n            hasFeedback\n            rules={[\n              {\n                required: true,\n                message: \"Please confirm your password!\",\n              },\n              ({ getFieldValue }) => ({\n                validator(_, value) {\n                  if (!value || getFieldValue(\"password\") === value) {\n                    return Promise.resolve();\n                  }\n\n                  return Promise.reject(\n                    new Error(\n                      \"The two passwords that you entered do not match!\"\n                    )\n                  );\n                },\n              }),\n            ]}>\n            <Input.Password />\n          </Form.Item>\n\n          <br />\n          <Form.Item>\n            <Button type='primary' htmlType='submit' loading={confirmLoading}>\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default SignIn;\n"],"sourceRoot":""}