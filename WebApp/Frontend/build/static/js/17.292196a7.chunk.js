(this["webpackJsonpsmart-iot-management-system"]=this["webpackJsonpsmart-iot-management-system"]||[]).push([[17],{348:function(e,t,n){"use strict";n.d(t,"v",(function(){return s})),n.d(t,"q",(function(){return l})),n.d(t,"j",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"t",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"m",(function(){return f})),n.d(t,"x",(function(){return p})),n.d(t,"u",(function(){return h})),n.d(t,"n",(function(){return j})),n.d(t,"r",(function(){return O})),n.d(t,"w",(function(){return v})),n.d(t,"o",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"s",(function(){return x})),n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return S})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return k})),n.d(t,"e",(function(){return C})),n.d(t,"c",(function(){return N})),n.d(t,"i",(function(){return E})),n.d(t,"l",(function(){return z}));var r=n(11),a=n(20),c=n(109),o=n(61),s=function(e){return c.a.patch("/auth/update-user",e,{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},l=function(){return c.a.get("/admin/all-users",{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},i=function(e){return c.a.patch("/admin/delete-user",{id:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},u=function(e){return c.a.patch("/macAddress/add",{macAddress:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},d=function(){return c.a.get("/macAddress/all",{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},b=function(e,t){return c.a.patch("/macAddress/remove",{macAddress:e,userId:t},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},m=function(){return c.a.get("/count/",{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},f=function(e){return c.a.post("/auth/forgot",{email:e})},p=function(e,t){return c.a.post("/auth/verify",{email:e,code:t})},h=function(e,t){return c.a.post("/auth/reset",{email:e,password:t})},j=function(){return c.a.get("/admin/all-macAddress",{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},O=function(e){return c.a.post("/mqtt/data",e)},v=function(e){return c.a.post("/mqtt/file/upload",e,{headers:{"x-access-token":Object(o.b)()}})},y=function(e){return c.a.post("/mqtt/files",e,{headers:{"x-access-token":Object(o.b)()}})},g=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete("/mqtt/file/delete/".concat(t),{headers:{Authorization:"Bearer ".concat(Object(o.b)())}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return c.a.post("/mqtt/publish",e,{headers:{"x-access-token":Object(o.b)()}})},A=function(e){return c.a.post("/program/all",{macAddress:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},S=function(e){return c.a.post("/program/post",e,{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},w=function(e){return c.a.patch("/program/delete",{id:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},k=function(e,t){return c.a.patch("/program/edit",{id:t,programName:e.programName,command:e.command},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},C=function(e){return c.a.post("/url/all",{macAddress:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},N=function(e){return c.a.post("/url/post",e,{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},E=function(e){return c.a.patch("/url/delete",{id:e},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})},z=function(e,t){return c.a.patch("/url/edit",{id:t,url:e.url},{headers:{Authorization:"Bearer ".concat(Object(o.b)())}})}},362:function(e,t,n){"use strict";var r=n(4),a=n(0),c=n(370),o=n(93),s=n(348),l=n(39),i=n(3);t.a=function(e){var t,n=e.setSelectedMacaddress,u=(e.page,Object(a.useState)()),d=Object(r.a)(u,2),b=d[0],m=d[1],f=Object(l.c)((function(e){return e.auth})),p=Object(o.useQuery)("client"===(null===f||void 0===f?void 0:f.role)?"getAllMacAddress":"getAdminUserAllMacAddress","client"===(null===f||void 0===f?void 0:f.role)?s.p:s.n),h=p.data,j=p.loading;Object(a.useEffect)((function(){if(!j){var e,t,n;if("admin"===(null===f||void 0===f?void 0:f.role))m(null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.macAddressess);if("client"===(null===f||void 0===f?void 0:f.role))m(null===h||void 0===h||null===(t=h.data)||void 0===t||null===(n=t.macAddressess)||void 0===n?void 0:n.macAddress)}}),[j,null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.macAddressess,null===f||void 0===f?void 0:f.role]);var O=c.a.Option,v=!j&&(null===b||void 0===b?void 0:b.map((function(e,t){return Object(i.jsx)(O,{value:"admin"===f.role?e.macAddress.macAddress:e.macAddress,children:"admin"===f.role?e.macAddress.macAddress:e.macAddress},"".concat(t))})));return null===v||void 0===v||v.unshift(Object(i.jsx)(O,{value:"All",children:"All"},"all")),Object(i.jsx)(c.a,{defaultValue:"Select MacAddress",style:{width:"15%",height:"25%",border:"1px solid black"},onChange:function(e){n(e)},children:!j&&v})}},363:function(e,t,n){"use strict";var r=n(4),a=n(0),c=n(369),o=n(3),s=c.a.TextArea;t.a=function(e){var t=e.socket,n=e.selectedMacaddress,c=Object(a.useState)("Logs"),l=Object(r.a)(c,2),i=l[0],u=l[1],d=Object(a.useState)(!1),b=Object(r.a)(d,2),m=b[0],f=b[1];return t.on("send_message",(function(e){var t=JSON.parse(e);t&&u(t)})),Object(a.useEffect)((function(){return f(!0),function(){f(!1),t.off("send_message")}}),[t]),m?Object(o.jsx)("div",{style:{marginBotton:50,textAlign:"center"},children:Object(o.jsx)(s,{rows:4,placeholder:"Logs",disabled:!0,value:n===i.macAddress||"getDeviceInfo"===i.macAddress?JSON.stringify(i):"Logs",style:{color:"red",width:"80%"}})}):null}},387:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(5),a=n(4),c=n(16),o=n(6),s=n.n(o),l=n(51),i=n(0),u=n(55),d=n(26),b=n(94),m=function(e){return e.children},f=n(1);function p(e){return void 0!==e&&null!==e}var h=function(e){var t,n=e.itemPrefixCls,a=e.component,c=e.span,o=e.className,l=e.style,u=e.labelStyle,d=e.contentStyle,b=e.bordered,m=e.label,f=e.content,h=e.colon,j=a;return b?i.createElement(j,{className:s()((t={},Object(r.a)(t,"".concat(n,"-item-label"),p(m)),Object(r.a)(t,"".concat(n,"-item-content"),p(f)),t),o),style:l,colSpan:c},p(m)&&i.createElement("span",{style:u},m),p(f)&&i.createElement("span",{style:d},f)):i.createElement(j,{className:s()("".concat(n,"-item"),o),style:l,colSpan:c},i.createElement("div",{className:"".concat(n,"-item-container")},(m||0===m)&&i.createElement("span",{className:s()("".concat(n,"-item-label"),Object(r.a)({},"".concat(n,"-item-no-colon"),!h)),style:u},m),(f||0===f)&&i.createElement("span",{className:s()("".concat(n,"-item-content")),style:d},f)))};function j(e,t,n){var r=t.colon,a=t.prefixCls,c=t.bordered,o=n.component,s=n.type,l=n.showLabel,u=n.showContent,d=n.labelStyle,b=n.contentStyle;return e.map((function(e,t){var n=e.props,m=n.label,p=n.children,j=n.prefixCls,O=void 0===j?a:j,v=n.className,y=n.style,g=n.labelStyle,x=n.contentStyle,A=n.span,S=void 0===A?1:A,w=e.key;return"string"===typeof o?i.createElement(h,{key:"".concat(s,"-").concat(w||t),className:v,style:y,labelStyle:Object(f.a)(Object(f.a)({},d),g),contentStyle:Object(f.a)(Object(f.a)({},b),x),span:S,colon:r,component:o,itemPrefixCls:O,bordered:c,label:l?m:null,content:u?p:null}):[i.createElement(h,{key:"label-".concat(w||t),className:v,style:Object(f.a)(Object(f.a)(Object(f.a)({},d),y),g),span:1,colon:r,component:o[0],itemPrefixCls:O,bordered:c,label:m}),i.createElement(h,{key:"content-".concat(w||t),className:v,style:Object(f.a)(Object(f.a)(Object(f.a)({},b),y),x),span:2*S-1,component:o[1],itemPrefixCls:O,bordered:c,content:p})]}))}var O=function(e){var t=i.useContext(v),n=e.prefixCls,r=e.vertical,a=e.row,c=e.index,o=e.bordered;return r?i.createElement(i.Fragment,null,i.createElement("tr",{key:"label-".concat(c),className:"".concat(n,"-row")},j(a,e,Object(f.a)({component:"th",type:"label",showLabel:!0},t))),i.createElement("tr",{key:"content-".concat(c),className:"".concat(n,"-row")},j(a,e,Object(f.a)({component:"td",type:"content",showContent:!0},t)))):i.createElement("tr",{key:c,className:"".concat(n,"-row")},j(a,e,Object(f.a)({component:o?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},v=i.createContext({}),y={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function g(e,t,n){var r=e;return(void 0===t||t>n)&&(r=Object(d.a)(e,{span:n})),r}function x(e){var t,n=e.prefixCls,o=e.title,d=e.extra,m=e.column,f=void 0===m?y:m,p=e.colon,h=void 0===p||p,j=e.bordered,x=e.layout,A=e.children,S=e.className,w=e.style,k=e.size,C=e.labelStyle,N=e.contentStyle,E=i.useContext(u.b),z=E.getPrefixCls,B=E.direction,P=z("descriptions",n),I=i.useState({}),M=Object(a.a)(I,2),F=M[0],q=M[1],L=function(e,t){if("number"===typeof e)return e;if("object"===Object(c.a)(e))for(var n=0;n<b.b.length;n++){var r=b.b[n];if(t[r]&&void 0!==e[r])return e[r]||y[r]}return 3}(f,F);i.useEffect((function(){var e=b.a.subscribe((function(e){"object"===Object(c.a)(f)&&q(e)}));return function(){b.a.unsubscribe(e)}}),[]);var D=function(e,t){var n=Object(l.a)(e).filter((function(e){return e})),r=[],a=[],c=t;return n.forEach((function(e,o){var s,l=null===(s=e.props)||void 0===s?void 0:s.span,i=l||1;if(o===n.length-1)return a.push(g(e,l,c)),void r.push(a);i<c?(c-=i,a.push(e)):(a.push(g(e,i,c)),r.push(a),c=t,a=[])})),r}(A,L),U=i.useMemo((function(){return{labelStyle:C,contentStyle:N}}),[C,N]);return i.createElement(v.Provider,{value:U},i.createElement("div",{className:s()(P,(t={},Object(r.a)(t,"".concat(P,"-").concat(k),k&&"default"!==k),Object(r.a)(t,"".concat(P,"-bordered"),!!j),Object(r.a)(t,"".concat(P,"-rtl"),"rtl"===B),t),S),style:w},(o||d)&&i.createElement("div",{className:"".concat(P,"-header")},o&&i.createElement("div",{className:"".concat(P,"-title")},o),d&&i.createElement("div",{className:"".concat(P,"-extra")},d)),i.createElement("div",{className:"".concat(P,"-view")},i.createElement("table",null,i.createElement("tbody",null,D.map((function(e,t){return i.createElement(O,{key:t,index:t,colon:h,prefixCls:P,vertical:"vertical"===x,bordered:j,row:e})})))))))}x.Item=m;t.b=x},394:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(20),c=n(4),o=n(0),s=n(370),l=n(215),i=n(332),u=n(333),d=n(398),b=n(387),m=n(369),f=n(107),p=n(362),h=n(363),j=n(348),O=n(3);t.default=function(e){var t=e.socket,n=s.a.Option,v=Object(o.useState)(),y=Object(c.a)(v,2),g=y[0],x=y[1],A=Object(o.useState)(),S=Object(c.a)(A,2),w=S[0],k=S[1],C=Object(o.useState)(),N=Object(c.a)(C,2),E=N[0],z=N[1],B=["command;[bash command]","logs=stdout","logs=stdout-user-script","logs=stderr","logs=stderr-user-script","logs=update-status"],P=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=3;break}return l.b.error("Please Select Macaddress First!"),e.abrupt("return");case 3:if(w){e.next=6;break}return l.b.error("Please Select a Config to Publish!"),e.abrupt("return");case 6:if(w!==B[0]||E){e.next=9;break}return l.b.error("Please Enter Config!"),e.abrupt("return");case 9:return e.prev=9,t="config/".concat("All"===g?"all":g),(n=new FormData).append("message",w===B[0]?"command;".concat(E):w),n.append("endPoint",t),e.next=16,Object(j.s)(n);case 16:200===e.sent.status&&l.b.success("Published Successfully!"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.b.error("Something went wrong, please check your internet connection!");case 23:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=3;break}return l.b.error("Please Select Macaddress First!"),e.abrupt("return");case 3:return e.prev=3,n="".concat(t,"/").concat("All"===g?"all":g),(a=new FormData).append("message",t),a.append("endPoint",n),e.next=10,Object(j.s)(a);case 10:200===e.sent.status&&l.b.success("Published to ".concat(g," is Successfull!")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),l.b.error("Something went wrong, please check your internet connection!");case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(i.a,{gutter:[24,0],style:{justifyContent:"center"},children:Object(O.jsx)(u.a,{span:24,md:24,className:"mb-24",children:Object(O.jsxs)(d.a,{bordered:!1,title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h6",{className:"font-semibold m-0",children:"Controls"}),Object(O.jsx)(p.a,{setSelectedMacaddress:x})]}),className:"header-solid h-full card-profile-information",bodyStyle:{paddingTop:0,paddingBottom:0},children:[Object(O.jsx)("hr",{}),Object(O.jsxs)(b.b,{style:{alignItems:"center",justifyContent:"center"},children:[Object(O.jsx)(b.b.Item,{style:{position:"absolute",width:"80%"},children:Object(O.jsx)(s.a,{defaultValue:"Select Config",style:{width:"24%"},dropdownStyle:{borderRadius:"20px"},onChange:function(e){k(e)},children:null===B||void 0===B?void 0:B.map((function(e){return Object(O.jsx)(n,{value:e,children:e},e)}))})}),w===B[0]&&Object(O.jsx)(b.b.Item,{children:Object(O.jsx)(m.a,{onChange:function(e){z(e.target.value)},placeholder:"Enter Config",style:{width:"50%",color:"black"}})}),Object(O.jsx)(b.b.Item,{label:"Publish Config",labelStyle:{alignItems:"center",color:"#000",fontSize:"15px",fontWeight:"900"},children:Object(O.jsx)(f.a,{type:"primary",className:"tag-primary",onClick:P,children:"Publish"})})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)(b.b,{style:{alignItems:"center",justifyContent:"center"},children:[Object(O.jsx)(b.b.Item,{label:"Publish Upgrade",labelStyle:{alignItems:"center",color:"#000",fontSize:"15px",fontWeight:"900"},style:{position:"absolute",width:"80%"},children:Object(O.jsx)(f.a,{type:"primary",className:"tag-primary",onClick:function(){return I("upgrade")},children:"Upgrade"})}),Object(O.jsx)(b.b.Item,{label:"Publish OSUG",labelStyle:{alignItems:"center",color:"#000",fontSize:"15px",fontWeight:"900"},children:Object(O.jsx)(f.a,{type:"primary",className:"tag-primary",onClick:function(){return I("osug")},children:"OSUG"})})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginTop:30},children:[Object(O.jsx)(h.a,{socket:t,selectedMacaddress:g}),Object(O.jsx)(f.a,{type:"primary",className:"tag-primary",style:{width:"50%",alignSelf:"center",marginTop:10,marginBottom:10},onClick:function(){return I("info")},children:"Get Device Info"})]})]})})})})}}}]);
//# sourceMappingURL=17.292196a7.chunk.js.map